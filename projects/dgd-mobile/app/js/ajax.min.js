function createXHR(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;throw Error("\u60a8\u7684\u7cfb\u7edf\u6216\u6d4f\u89c8\u5668\u4e0d\u652f\u6301XHR\u5bf9\u8c61\uff01");}function params(a){var c=[],b;for(b in a)c.push(encodeURIComponent(b)+"="+encodeURIComponent(a[b]));return c.join("&")}function ajax(a){function c(){200==b.status?a.success(b.responseText):a.Error("\u83b7\u53d6\u6570\u636e\u5931\u8d25\uff0c\u9519\u8bef\u4ee3\u53f7\u4e3a\uff1a"+b.status+"\u9519\u8bef\u4fe1\u606f\u4e3a\uff1a"+b.statusText)}var b=createXHR();a.url=a.url;a.data=params(a.data);"get"===a.method&&(a.url+="-1"==a.url.indexOf("?")?"?"+a.data:"&"+a.data);!0===a.async&&(b.onreadystatechange=function(){4==b.readyState&&c()});b.open(a.method,a.url,a.async);"post"===a.method?(b.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),b.send(a.data)):b.send(null);!1===a.async&&c()};